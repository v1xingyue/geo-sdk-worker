<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ°ç†ä½ç½®æ„ŸçŸ¥ SDK æ¼”ç¤º</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .status {
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        #console {
            max-height: 300px;
            overflow-y: auto;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .log-entry {
            margin: 5px 0;
            padding: 3px;
        }
        .log-info { color: #4ec9b0; }
        .log-warn { color: #dcdcaa; }
        .log-error { color: #f48771; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ åœ°ç†ä½ç½®æ„ŸçŸ¥ SDK æ¼”ç¤º</h1>
        <p>è¿™ä¸ªæ¼”ç¤ºå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨åŠ¨æ€ SDKï¼Œå®ƒä¼šæ ¹æ®ç”¨æˆ·çš„åœ°ç†ä½ç½®è¿”å›ä¸åŒçš„åŠŸèƒ½ã€‚</p>

        <div id="status" class="status info">
            æ­£åœ¨åŠ è½½ SDK...
        </div>

        <div style="margin: 20px 0;">
            <h3>SDK ä¿¡æ¯</h3>
            <pre id="sdk-info">SDK æœªåŠ è½½</pre>
        </div>

        <div>
            <h3>æµ‹è¯•åŠŸèƒ½</h3>
            <button onclick="testInit()">æµ‹è¯•åˆå§‹åŒ–</button>
            <button onclick="testGetUserInfo()">è·å–ç”¨æˆ·ä¿¡æ¯</button>
            <button onclick="testAPICall()">æµ‹è¯• API è°ƒç”¨</button>
        </div>

        <div style="margin-top: 20px;">
            <h3>æ§åˆ¶å°è¾“å‡º</h3>
            <div id="console"></div>
        </div>

        <div style="margin-top: 20px; font-size: 14px; color: #666;">
            <p><strong>è¯´æ˜ï¼š</strong></p>
            <ul>
                <li>å¦‚æœæ‚¨æ¥è‡ªä¸­å›½å¢ƒå†…ï¼ŒSDK ä¼šè¿”å›å—é™ç‰ˆæœ¬ï¼Œæ˜¾ç¤º"åº”ç”¨æš‚æ—¶æ‹’ç»è®¿é—®"</li>
                <li>å¦‚æœæ‚¨æ¥è‡ªå…¶ä»–åœ°åŒºï¼ŒSDK ä¼šè¿”å›å®Œæ•´åŠŸèƒ½ç‰ˆæœ¬</li>
                <li>å½“å‰æ£€æµ‹åˆ°çš„å›½å®¶/åœ°åŒºä¼šæ˜¾ç¤ºåœ¨ä¸Šæ–¹çš„ SDK ä¿¡æ¯ä¸­</li>
            </ul>
        </div>
    </div>

    <!-- åŠ è½½åŠ¨æ€ SDK -->
    <script src="http://localhost:8787/sdk.js"></script>

    <script>
        // æ‹¦æˆª console è¾“å‡ºå¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
        const consoleDiv = document.getElementById('console');
        const originalConsole = {
            log: console.log,
            info: console.info,
            warn: console.warn,
            error: console.error
        };

        function addToConsole(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            consoleDiv.appendChild(entry);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        }

        console.log = function(...args) {
            originalConsole.log.apply(console, args);
            addToConsole(args.join(' '), 'info');
        };

        console.info = function(...args) {
            originalConsole.info.apply(console, args);
            addToConsole(args.join(' '), 'info');
        };

        console.warn = function(...args) {
            originalConsole.warn.apply(console, args);
            addToConsole(args.join(' '), 'warn');
        };

        console.error = function(...args) {
            originalConsole.error.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };

        // ç­‰å¾… SDK åŠ è½½
        setTimeout(() => {
            const statusDiv = document.getElementById('status');
            const infoDiv = document.getElementById('sdk-info');

            if (window.MySDK) {
                if (window.MySDK.available) {
                    statusDiv.className = 'status success';
                    statusDiv.textContent = 'âœ… SDK å·²åŠ è½½ - å®Œæ•´åŠŸèƒ½å¯ç”¨';
                } else {
                    statusDiv.className = 'status error';
                    statusDiv.textContent = 'â›” SDK å·²åŠ è½½ - å—é™æ¨¡å¼ï¼ˆ' + window.MySDK.message + 'ï¼‰';
                }

                infoDiv.textContent = JSON.stringify({
                    version: window.MySDK.version,
                    country: window.MySDK.country,
                    available: window.MySDK.available
                }, null, 2);
            } else {
                statusDiv.className = 'status error';
                statusDiv.textContent = 'âŒ SDK åŠ è½½å¤±è´¥';
            }
        }, 100);

        // æµ‹è¯•å‡½æ•°
        function testInit() {
            try {
                const result = window.MySDK.init({
                    appId: 'demo-app',
                    apiKey: 'test-key-123'
                });
                console.log('åˆå§‹åŒ–ç»“æœ:', JSON.stringify(result));
            } catch (e) {
                console.error('åˆå§‹åŒ–å¤±è´¥:', e.message);
            }
        }

        function testGetUserInfo() {
            try {
                const info = window.MySDK.getUserInfo();
                console.log('ç”¨æˆ·ä¿¡æ¯:', JSON.stringify(info));
            } catch (e) {
                console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', e.message);
            }
        }

        function testAPICall() {
            try {
                console.log('å°è¯•è°ƒç”¨ API...');
                window.MySDK.call('/api/test', { data: 'test' })
                    .then(result => {
                        console.log('API è°ƒç”¨æˆåŠŸ:', JSON.stringify(result));
                    })
                    .catch(err => {
                        console.error('API è°ƒç”¨å¤±è´¥:', err.message);
                    });
            } catch (e) {
                console.error('API è°ƒç”¨å¼‚å¸¸:', e.message);
            }
        }
    </script>
</body>
</html>
